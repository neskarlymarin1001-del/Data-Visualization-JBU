---
title: "LAB4.1: Customer Retail (Cross Sectional)"
author: "Neskarly Marin"
format:
  revealjs:
    embed-resources: true
    theme: serif
    slide-number: true
    chalkboard: false
    transition: fade
    code-fold: true
    code-line-numbers: false
    center: false
    width: 1200
    height: 675
    scrollable: true
    code-overflow: wrap
execute:
  echo: true
  warning: false
  message: false
knitr:
  opts_chunk:
    dev: "svg"
---

```{r}
#| include: false

library(tidyverse)
library(scales)

load("customer_retail.RData")
theme_set(
  theme_minimal(base_size = 16) +
    theme(
      plot.title = element_text(face = "bold"),
      plot.subtitle = element_text(color = "gray30"),
      panel.grid.minor = element_blank(),
      legend.title = element_text(face = "bold"),
      legend.position = "top"
    )
)

pal_resp <- c("No" = "#9AA0A6", "Yes" = "#1A73E8")

```

## Chart 1 — Campaign responsiveness and family status
### RQ: Are customers with kids at home less likely to respond to marketing campaigns?
- *Chart choice:* Proportion stacked bar chart to compare response likelihood (distribution) within each group.

```{r}
#| code-fold: true
#| output-location: slide

customer_retail %>%
  mutate(
    KidsAtHome = if_else(KidsAtHome_binary == 1, "Kids at home", "No kids at home"),
    Responsive = factor(Responsive, levels = c("No", "Yes"))
  ) %>%
  ggplot(aes(x = KidsAtHome, fill = Responsive)) +
  geom_bar(position = "fill") +
  scale_y_continuous(labels = percent_format()) +
  labs(
    title = "Campaign Responsiveness by Presence of Kids at Home",
    subtitle = "Proportions (not counts) show response likelihood within each group.",
    x = NULL,
    y = "Share of customers",
    fill = "Responded?"
  )+
  scale_fill_manual(values = pal_resp) 
```


## Chart 2 — Income differences by campaign responsiveness
### RQ: Do customers who respond to campaigns have higher incomes?
- *Chart choice:* Boxplot to compare the typical value (median) and spread of a continuous variable across categories; log scale for skew.


```{r}
#| code-fold: true
#| output-location: slide

customer_retail %>%
  mutate(Responsive = factor(Responsive, levels = c("No", "Yes"))) %>%
  ggplot(aes(x = Responsive, y = Income, fill = Responsive)) +
  geom_boxplot(outlier.alpha = 0.25, width = 0.55) +
  scale_y_log10(labels = dollar_format()) +
  labs(
    title = "Income Differences by Campaign Responsiveness",
    subtitle = "Using a log scale improves readability when income is right-skewed.",
    x = NULL,
    y = "Income (log scale)",
    fill = "Responded?"
  ) + 
  theme(legend.position = "none") + 
  scale_fill_manual(values = pal_resp)
```


## Chart 3 — Age patterns by responsiveness 
### RQ: Do responders and non-responders have different age distributions?
- *Chart choice:* Scaled density plot to compare distribution shapes independent of group size.

```{r}
#| code-fold: true
#| output-location: slide

customer_retail %>%
  mutate(Responsive = factor(Responsive, levels = c("No", "Yes"))) %>%
  ggplot(aes(x = Age, fill = Responsive, color = Responsive)) +
  geom_density(alpha = 0.25, aes(y = ..scaled..)) +
  labs(
    title = "Age Distribution by Campaign Responsiveness",
    subtitle = "Scaled density (peak = 1) compares distribution shapes independent of group size.",
    x = "Age",
    y = "Scaled density",
    fill = "Responded?",
    color = "Responded?"
  ) + 
  scale_fill_manual(values = pal_resp) +
  scale_color_manual(values = pal_resp)

```

## Chart 4 — Spending and income relationship
### RQ: Do higher-income customers spend more overall?
- *Chart choice:* Scatterplot to examine the relationship between two continuous variables; LOESS smooth for trend; log scale for skewed spending.

```{r}
#| code-fold: true
#| output-location: slide

customer_retail %>%
  ggplot(aes(x = Income, y = TotalSpend)) +
  geom_point(alpha = 0.35, color = "#9AA0A6") +
  geom_smooth(method = "loess", se = FALSE, linewidth = 1.2, color = "#1A73E8") +
  scale_x_continuous(labels = dollar_format()) +
  scale_y_log10(labels = dollar_format()) +
  labs(
    title = "Income and Total Spending",
    subtitle = "Spending generally rises with income, but variability is substantial; log scale clarifies skew.",
    x = "Income",
    y = "Total spend (log scale)"
  )

```

